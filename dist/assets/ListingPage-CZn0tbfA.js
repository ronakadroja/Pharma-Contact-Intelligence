import{c as oe,r as n,j as e,d as L,X as g,b as ae,a as ie,f as le,g as ee}from"./index-C6Z2bi7o.js";import{r as ce,L as te,g as de}from"./contacts-Bj8lGc_i.js";import{f as xe,a as me,b as pe,c as ue,d as ge}from"./combo-DxW0mQUW.js";import{F as U,M as P,u as he}from"./useInfiniteScroll-DCeba735.js";import{C as ye,a as be,T as fe}from"./Table-BYymsnLl.js";import{S as K}from"./search-CK6P0SnO.js";import{H as je}from"./Header-DEZNJqDj.js";import{M as se}from"./mail-DnTBgYcB.js";import{P as re}from"./user-DwH4Nz_r.js";import{P as Ne}from"./plus-C1iUYXLK.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ve=oe("check",Ce),X={company_name:[],person_name:"",department:[],designation:"",product_type:[],person_country:[],company_country:[],region:[],city:""},ne=({onFilter:O,isMobile:k,isLoading:s=!1,dropdownData:c})=>{const[_,u]=n.useState(X),[f,w]=n.useState(""),[p,N]=n.useState(""),[d,A]=n.useState(""),[z,W]=n.useState(!0),[S,I]=n.useState(0),h=n.useRef(!0),[F,y]=n.useState([]),[C,R]=n.useState([]),[D,v]=n.useState([]),[B,$]=n.useState([]),[M,V]=n.useState([]),[H,T]=n.useState([]),t=(c==null?void 0:c.companies)||[],o=(c==null?void 0:c.departments)||[],x=(c==null?void 0:c.productTypes)||[],m=(c==null?void 0:c.countries)||[],b=(c==null?void 0:c.regions)||[],i=(c==null?void 0:c.isLoading)||!1;n.useEffect(()=>{h.current=!1},[]),n.useEffect(()=>{const a=Object.values(_).filter(r=>Array.isArray(r)?r.length>0:r!==""&&r!=="All").length;I(a)},[_]);const E=a=>{y(a);const r=a.map(l=>l.name);u(l=>({...l,company_name:r}))},G=a=>{R(a);const r=a.map(l=>l.name);u(l=>({...l,person_country:r}))},Y=a=>{v(a);const r=a.map(l=>l.name);u(l=>({...l,company_country:r}))},q=a=>{$(a);const r=a.map(l=>l.name);u(l=>({...l,department:r}))},J=a=>{V(a);const r=a.map(l=>l.name);u(l=>({...l,product_type:r}))},Q=a=>{T(a);const r=a.map(l=>l.name);u(l=>({...l,region:r}))},Z=()=>{u(X),y([]),R([]),v([]),$([]),V([]),T([]),w(""),N(""),A(""),O(X)},j=a=>{const r={..._};switch(a){case"company_name":y([]),r.company_name=[];break;case"person_name":w(""),r.person_name="";break;case"department":$([]),r.department=[];break;case"designation":N(""),r.designation="";break;case"product_type":V([]),r.product_type=[];break;case"person_country":R([]),r.person_country=[];break;case"company_country":v([]),r.company_country=[];break;case"region":T([]),r.region=[];break;case"city":A(""),r.city="";break}u(r)};return e.jsxs("div",{className:"h-full flex flex-col bg-white rounded-lg shadow-sm border border-gray-200",children:[k?e.jsx("div",{className:"flex-shrink-0 p-4 bg-gray-50 border-b border-gray-200 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{size:18,className:"text-gray-600"}),e.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Filters"}),S>0&&e.jsx(L,{variant:"primary",size:"sm",children:S})]}),e.jsx("button",{className:"text-gray-500 hover:text-gray-700 p-2 hover:bg-gray-200 rounded-full transition-colors",onClick:Z,title:"Reset filters",children:e.jsx(g,{size:16})})]})}):e.jsx("div",{className:"flex-shrink-0 p-4 bg-gray-50 border-b border-gray-200 rounded-t-lg",children:e.jsxs("button",{className:"w-full flex items-center justify-between hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset rounded-md p-2 -m-2",onClick:()=>W(!z),"aria-expanded":z,"aria-controls":"filter-content",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{size:18,className:"text-gray-600"}),e.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Filters"}),S>0&&e.jsx(L,{variant:"primary",size:"sm",children:S})]}),e.jsx("div",{className:"flex items-center",children:z?e.jsx(ye,{size:18,className:"text-gray-500"}):e.jsx(be,{size:18,className:"text-gray-500"})})]})}),z&&e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{options:t,selectedValues:F,onSelect:E,onRemove:E,displayValue:"name",placeholder:"Search and select company names...",emptyRecordMsg:"No companies found. Try a different search term.",showCheckbox:!0,closeIcon:"cancel",showArrow:!0,style:{chips:{background:"#3B82F6",color:"white",fontSize:"12px",borderRadius:"4px",padding:"2px 6px",margin:"1px"},searchBox:{border:"1px solid #D1D5DB",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",minHeight:"40px",backgroundColor:"white"},inputField:{margin:"0px",fontSize:"14px",color:"#374151",backgroundColor:"transparent"},option:{color:"#374151",backgroundColor:"white",padding:"8px 10px",fontSize:"14px",borderBottom:"1px solid #F3F4F6",cursor:"pointer"},optionContainer:{border:"1px solid #D1D5DB",borderRadius:"6px",maxHeight:"200px",marginTop:"2px",backgroundColor:"white",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:1e3},multiselectContainer:{color:"#374151"},highlightOption:{backgroundColor:"#EBF8FF",color:"#1E40AF"}},loading:i,disable:s||i}),F.length>0&&e.jsx("button",{onClick:()=>j("company_name"),disabled:s,className:`absolute right-3 top-3 transition-colors z-10 ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear company names",children:e.jsx(g,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Country"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{options:m,selectedValues:D,onSelect:Y,onRemove:Y,displayValue:"name",placeholder:"Search and select company countries...",emptyRecordMsg:"No countries found. Try a different search term.",showCheckbox:!0,closeIcon:"cancel",showArrow:!0,style:{chips:{background:"#10B981",color:"white",fontSize:"12px",borderRadius:"4px",padding:"2px 6px",margin:"1px"},searchBox:{border:"1px solid #D1D5DB",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",minHeight:"40px",backgroundColor:"white"},inputField:{margin:"0px",fontSize:"14px",color:"#374151",backgroundColor:"transparent"},option:{color:"#374151",backgroundColor:"white",padding:"8px 10px",fontSize:"14px",borderBottom:"1px solid #F3F4F6",cursor:"pointer"},optionContainer:{border:"1px solid #D1D5DB",borderRadius:"6px",maxHeight:"200px",marginTop:"2px",backgroundColor:"white",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:1e3},multiselectContainer:{color:"#374151"},highlightOption:{backgroundColor:"#ECFDF5",color:"#047857"}},loading:i,disable:s||i}),D.length>0&&e.jsx("button",{onClick:()=>j("company_country"),disabled:s,className:`absolute right-3 top-3 transition-colors z-10 ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear company countries",children:e.jsx(g,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"person-name-input",className:"block text-sm font-medium text-gray-700",children:"Person Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"person-name-input",type:"text",value:f,onChange:a=>w(a.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 pl-9 pr-9 text-sm placeholder:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors h-10",placeholder:"Search by person name..."}),e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),f&&e.jsx("button",{onClick:()=>j("person_name"),disabled:s,className:`absolute right-3 top-1/2 transform -translate-y-1/2 transition-colors ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear person name",children:e.jsx(g,{size:14})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Person Country"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{options:m,selectedValues:C,onSelect:G,onRemove:G,displayValue:"name",placeholder:"Search and select person countries...",emptyRecordMsg:"No countries found. Try a different search term.",showCheckbox:!0,closeIcon:"cancel",showArrow:!0,style:{chips:{background:"#8B5CF6",color:"white",fontSize:"12px",borderRadius:"4px",padding:"2px 6px",margin:"1px"},searchBox:{border:"1px solid #D1D5DB",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",minHeight:"40px",backgroundColor:"white"},inputField:{margin:"0px",fontSize:"14px",color:"#374151",backgroundColor:"transparent"},option:{color:"#374151",backgroundColor:"white",padding:"8px 10px",fontSize:"14px",borderBottom:"1px solid #F3F4F6",cursor:"pointer"},optionContainer:{border:"1px solid #D1D5DB",borderRadius:"6px",maxHeight:"200px",marginTop:"2px",backgroundColor:"white",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:1e3},multiselectContainer:{color:"#374151"},highlightOption:{backgroundColor:"#F3E8FF",color:"#6B21A8"}},loading:i,disable:s||i}),C.length>0&&e.jsx("button",{onClick:()=>j("person_country"),disabled:s,className:`absolute right-3 top-3 transition-colors z-10 ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear person countries",children:e.jsx(g,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Region"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{options:b,selectedValues:H,onSelect:Q,onRemove:Q,displayValue:"name",placeholder:"Search and select regions...",emptyRecordMsg:"No regions found. Try a different search term.",showCheckbox:!0,closeIcon:"cancel",showArrow:!0,style:{chips:{background:"#F59E0B",color:"white",fontSize:"12px",borderRadius:"4px",padding:"2px 6px",margin:"1px"},searchBox:{border:"1px solid #D1D5DB",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",minHeight:"40px",backgroundColor:"white"},inputField:{margin:"0px",fontSize:"14px",color:"#374151",backgroundColor:"transparent"},option:{color:"#374151",backgroundColor:"white",padding:"8px 10px",fontSize:"14px",borderBottom:"1px solid #F3F4F6",cursor:"pointer"},optionContainer:{border:"1px solid #D1D5DB",borderRadius:"6px",maxHeight:"200px",marginTop:"2px",backgroundColor:"white",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:1e3},multiselectContainer:{color:"#374151"},highlightOption:{backgroundColor:"#FEF3C7",color:"#92400E"}},loading:i,disable:s||i}),H.length>0&&e.jsx("button",{onClick:()=>j("region"),disabled:s,className:`absolute right-3 top-3 transition-colors z-10 ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear regions",children:e.jsx(g,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"city-input",className:"block text-sm font-medium text-gray-700",children:"City"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"city-input",type:"text",value:d,onChange:a=>A(a.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 pl-9 pr-9 text-sm placeholder:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors h-10",placeholder:"Search by city..."}),e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),d&&e.jsx("button",{onClick:()=>j("city"),disabled:s,className:`absolute right-3 top-1/2 transform -translate-y-1/2 transition-colors ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear city",children:e.jsx(g,{size:14})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"designation-input",className:"block text-sm font-medium text-gray-700",children:"Designation"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"designation-input",type:"text",value:p,onChange:a=>N(a.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 pl-9 pr-9 text-sm placeholder:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors h-10",placeholder:"Search by designation..."}),e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),p&&e.jsx("button",{onClick:()=>j("designation"),disabled:s,className:`absolute right-3 top-1/2 transform -translate-y-1/2 transition-colors ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear designation",children:e.jsx(g,{size:14})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Department"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{options:o,selectedValues:B,onSelect:q,onRemove:q,displayValue:"name",placeholder:"Search and select departments...",emptyRecordMsg:"No departments found. Try a different search term.",showCheckbox:!0,closeIcon:"cancel",showArrow:!0,style:{chips:{background:"#F59E0B",color:"white",fontSize:"12px",borderRadius:"4px",padding:"2px 6px",margin:"1px"},searchBox:{border:"1px solid #D1D5DB",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",minHeight:"40px",backgroundColor:"white"},inputField:{margin:"0px",fontSize:"14px",color:"#374151",backgroundColor:"transparent"},option:{color:"#374151",backgroundColor:"white",padding:"8px 10px",fontSize:"14px",borderBottom:"1px solid #F3F4F6",cursor:"pointer"},optionContainer:{border:"1px solid #D1D5DB",borderRadius:"6px",maxHeight:"200px",marginTop:"2px",backgroundColor:"white",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:1e3},multiselectContainer:{color:"#374151"},highlightOption:{backgroundColor:"#FEF3C7",color:"#92400E"}},loading:i,disable:s||i}),B.length>0&&e.jsx("button",{onClick:()=>j("department"),disabled:s,className:`absolute right-3 top-3 transition-colors z-10 ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear departments",children:e.jsx(g,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product Type"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{options:x,selectedValues:M,onSelect:J,onRemove:J,displayValue:"name",placeholder:"Search and select product types...",emptyRecordMsg:"No product types found. Try a different search term.",showCheckbox:!0,closeIcon:"cancel",showArrow:!0,style:{chips:{background:"#EF4444",color:"white",fontSize:"12px",borderRadius:"4px",padding:"2px 6px",margin:"1px"},searchBox:{border:"1px solid #D1D5DB",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",minHeight:"40px",backgroundColor:"white"},inputField:{margin:"0px",fontSize:"14px",color:"#374151",backgroundColor:"transparent"},option:{color:"#374151",backgroundColor:"white",padding:"8px 10px",fontSize:"14px",borderBottom:"1px solid #F3F4F6",cursor:"pointer"},optionContainer:{border:"1px solid #D1D5DB",borderRadius:"6px",maxHeight:"200px",marginTop:"2px",backgroundColor:"white",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:1e3},multiselectContainer:{color:"#374151"},highlightOption:{backgroundColor:"#FEE2E2",color:"#B91C1C"}},loading:i,disable:s||i}),M.length>0&&e.jsx("button",{onClick:()=>j("product_type"),disabled:s,className:`absolute right-3 top-3 transition-colors z-10 ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear product types",children:e.jsx(g,{size:16})})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-100",children:[e.jsxs("button",{onClick:()=>{const a={company_name:F.map(r=>r.name),person_name:f,department:B.map(r=>r.name),designation:p,product_type:M.map(r=>r.name),person_country:C.map(r=>r.name),company_country:D.map(r=>r.name),region:H.map(r=>r.name),city:d};u(a),O(a)},disabled:s,className:`flex-1 px-3 py-2 rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center justify-center gap-2 ${s?"bg-blue-400 text-white cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[e.jsx(K,{size:14}),"Search"]}),e.jsx("button",{onClick:Z,disabled:s,className:`px-3 py-2 border rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 flex items-center justify-center gap-2 ${s?"border-gray-200 text-gray-400 cursor-not-allowed bg-gray-50":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-2 border-gray-400 border-t-transparent"}),"Clearing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{size:14}),"Clear All"]})})]})]})})]})},ke=10,Ae=()=>{const[O,k]=n.useState([]),[s,c]=n.useState(1),[_,u]=n.useState(!0),[f,w]=n.useState(!0),[p,N]=n.useState(!0),[d,A]=n.useState({company_name:[],person_name:"",department:[],designation:"",product_type:[],person_country:[],company_country:[],region:[],city:""}),[z,W]=n.useState([]),[S,I]=n.useState({companies:[],departments:[],productTypes:[],countries:[],regions:[],isLoaded:!1,isLoading:!1}),{showToast:h}=ae(),{setCoins:F,coins:y}=ie(),C=n.useRef(!1),R=n.useCallback(async t=>{try{if(y<=50){h("Insufficient credits! You need more than 50 credits to reveal contact information. Please purchase more credits to continue.","error");return}const o=await ce(t.id);F(o.available_credit),h(`Added ${t.person_name} to your list`,"success"),k(x=>x.map(m=>m.id===t.id?{...m,...o.contact}:m))}catch(o){console.error("Error revealing contact:",o),h("Failed to reveal contact information","error")}},[y,h,F]),D=n.useMemo(()=>[{accessorKey:"company_name",header:"Company",size:200,cell:({row:t})=>e.jsxs("div",{className:"min-w-0 max-w-[200px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900 truncate",children:t.original.company_name}),t.original.company_linkedin_url&&e.jsx("a",{href:t.original.company_linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 transition-colors flex-shrink-0",title:"View Company LinkedIn",children:e.jsx(te,{size:14})})]}),t.original.company_website&&e.jsx("div",{className:"text-xs text-blue-600 hover:text-blue-800 transition-colors truncate",children:t.original.company_website})]})},{accessorKey:"person_name",header:"Contact Person",size:180,cell:({row:t})=>e.jsxs("div",{className:"min-w-0 max-w-[180px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900 truncate",children:t.original.person_name}),t.original.person_linkedin_url&&e.jsx("a",{href:t.original.person_linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 transition-colors flex-shrink-0",title:"View LinkedIn Profile",children:e.jsx(te,{size:14})})]}),e.jsx("div",{className:"text-xs text-gray-600 truncate",children:t.original.designation})]})},{accessorKey:"contact_info",header:"Contact Info",size:200,cell:({row:t})=>{const o=t.original.email&&t.original.email.trim()!=="",x=t.original.phone&&t.original.phone.trim()!=="";return!o&&!x?e.jsx("div",{className:"min-w-0 max-w-[200px]",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(se,{size:12,className:"text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-mono text-gray-400 truncate",children:"****@*****.com"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(re,{size:12,className:"text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-mono text-gray-400 truncate",children:"+1-***-***-****"})]})]})}):e.jsx("div",{className:"min-w-0 max-w-[200px]",children:e.jsxs("div",{className:"space-y-1",children:[o&&e.jsxs("a",{href:`mailto:${t.original.email}`,className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 hover:underline group",title:t.original.email,children:[e.jsx(se,{size:12,className:"text-blue-500 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.original.email})]}),x&&e.jsxs("a",{href:`tel:${t.original.phone}`,className:"flex items-center gap-1 text-xs text-green-600 hover:text-green-800 hover:underline group",title:t.original.phone,children:[e.jsx(re,{size:12,className:"text-green-500 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.original.phone})]})]})})}},{id:"actions",header:"Add",size:120,cell:({row:t})=>{if(t.original.email&&t.original.email.trim()!=="")return e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"inline-flex items-center gap-1 px-1 py-1 text-xs font-medium text-green-700 bg-green-50 rounded-md border border-green-200",title:"Already added to your list",children:[e.jsx(ve,{size:12}),e.jsx("span",{children:"Added"})]})});{const x=y<=50;return e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:()=>R(t.original),disabled:x,className:`inline-flex items-center gap-1 px-1 py-1 text-xs font-medium rounded-md transition-all duration-200 focus:outline-none focus:ring-1 focus:ring-offset-1 ${x?"text-gray-400 bg-gray-100 cursor-not-allowed opacity-60 border border-gray-200":"text-blue-600 hover:text-white bg-blue-50 hover:bg-blue-600 border border-blue-200 hover:border-blue-600 focus:ring-blue-500"}`,title:x?"Insufficient credits (need more than 50)":"Add to your list",children:[e.jsx(Ne,{size:12}),e.jsx("span",{children:x?"Credits":"Add"})]})})}}},{accessorKey:"is_verified",header:"Status",size:100,cell:({row:t})=>{const o=t.original.is_verified===1;return e.jsx("div",{className:"flex justify-center",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium transition-colors ${o?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:[o?e.jsx(le,{size:10,className:"mr-1"}):e.jsx(ee,{size:10,className:"mr-1"}),o?"Verified":"Unverified"]})})}},{accessorKey:"location",header:"Location",size:150,cell:({row:t})=>e.jsx("div",{className:"min-w-0 max-w-[150px]",children:e.jsxs("div",{className:"text-sm text-gray-900 truncate",title:`${t.original.city}, ${t.original.person_country}`,children:[e.jsx("span",{className:"font-medium",children:t.original.city}),t.original.city&&t.original.person_country&&", ",e.jsx("span",{className:"text-gray-600",children:t.original.person_country})]})})},{accessorKey:"department",header:"Department",size:160,cell:({row:t})=>e.jsxs("div",{className:"min-w-0 max-w-[160px]",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate mb-1",title:t.original.department,children:t.original.department}),e.jsx("div",{className:"text-xs text-gray-600 truncate",title:t.original.product_type,children:t.original.product_type})]})},{accessorKey:"product_type",header:"Product Type",size:140,cell:({row:t})=>e.jsx("div",{className:"min-w-0 max-w-[140px]",children:e.jsx("div",{className:"text-sm text-gray-900 truncate",title:t.original.product_type,children:t.original.product_type})})},{accessorKey:"company_country",header:"Company Country",size:150,cell:({row:t})=>e.jsx("div",{className:"min-w-0 max-w-[150px]",children:e.jsx("div",{className:"text-sm text-gray-900 truncate",title:t.original.company_country,children:t.original.company_country})})},{accessorKey:"region",header:"Region",size:120,cell:({row:t})=>e.jsx("div",{className:"min-w-0 max-w-[120px]",children:e.jsx("div",{className:"text-sm text-gray-900 truncate",title:t.original.region,children:t.original.region})})}],[R,y]),v=n.useCallback(async(t=1,o=!1,x=!1)=>{try{o||w(!0);const m={company_name:d.company_name,person_name:d.person_name,department:d.department,designation:d.designation,product_type:d.product_type,person_country:d.person_country,company_country:d.company_country,region:d.region,city:d.city,page:t,per_page:ke},b=await de(m);o?k(i=>[...i,...b.data]):(k(b.data),c(1)),u(b.current_page<b.last_page),x&&h("Contact data loaded successfully","success")}catch(m){console.error("Error fetching contacts:",m),h("Failed to fetch contacts","error"),o||(k([]),u(!1))}finally{o||w(!1)}},[d,h]),B=n.useCallback(async()=>{if(!C.current){C.current=!0,I(t=>({...t,isLoading:!0}));try{const[t,o,x,m,b]=await Promise.all([xe(),me(),pe(),ue(),ge()]);I({companies:t,departments:o,productTypes:x,countries:m,regions:b,isLoaded:!0,isLoading:!1})}catch(t){console.error("Failed to load dropdown data:",t),I(o=>({...o,isLoading:!1,companies:o.companies,departments:o.departments,productTypes:o.productTypes,countries:o.countries,regions:o.regions})),C.current=!1}}},[]),$=n.useCallback(async()=>{const t=s+1;c(t),await v(t,!0)},[s,v]),{isLoadingMore:M,containerRef:V,tableScrollRef:H}=he($,{threshold:500,enabled:!f&&_,isLoading:f,hasMore:_,useTableScroll:!0});n.useEffect(()=>{v(1,!1)},[]),n.useEffect(()=>{c(1),k([]),u(!0),v(1,!1)},[d]),n.useEffect(()=>{const t=localStorage.getItem("contactsFilterVisibility");t!==null&&N(t==="true")},[]),n.useEffect(()=>{localStorage.setItem("contactsFilterVisibility",p.toString())},[p]),n.useEffect(()=>{p&&!C.current&&B()},[p,B]);const T=n.useCallback(t=>{const o={...d},x={company_name:t.company_name,person_name:t.person_name,department:t.department,designation:t.designation,product_type:t.product_type,person_country:t.person_country,company_country:t.company_country,region:t.region,city:t.city},m=Object.values(x).every(i=>Array.isArray(i)?i.length===0:i===""),b=Object.values(o).some(i=>Array.isArray(i)?i.length>0:i!=="");if(A(x),!(m&&b)){if(!m){const i=Object.values(x).filter(E=>Array.isArray(E)?E.length>0:E!=="").length;h(`Applied ${i} filter${i!==1?"s":""}`,"success")}}},[d,h]);return e.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col overflow-hidden",ref:V,children:[e.jsx(je,{}),e.jsx("div",{className:"lg:hidden flex-shrink-0 bg-white border-b border-gray-200 shadow-sm",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("button",{onClick:()=>N(!p),className:"flex items-center justify-center w-full gap-2 px-4 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[e.jsx(U,{size:16}),e.jsx("span",{children:p?"Hide Filters":"Show Filters"}),Object.values(d).filter(t=>t!=="").length>0&&e.jsx("span",{className:"ml-1.5 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:Object.values(d).filter(t=>t!=="").length})]})})}),e.jsx("div",{className:`lg:hidden flex-shrink-0 transition-all duration-300 ${p?"max-h-[400px] opacity-100":"max-h-0 opacity-0"} overflow-hidden`,children:e.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Filters"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-md",children:e.jsx(g,{size:24})})]}),e.jsx(ne,{onFilter:T,isMobile:!0,isLoading:f,dropdownData:S})]})}),e.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:e.jsxs("div",{className:"h-full flex flex-col lg:flex-row",children:[p&&e.jsx("div",{className:"hidden lg:flex flex-col flex-shrink-0 transition-all duration-300 overflow-hidden",style:{width:"20%",minWidth:"250px",maxWidth:"300px"},children:e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx(ne,{onFilter:T,isMobile:!1,isLoading:f,dropdownData:S})})}),e.jsx("div",{className:"flex-1 min-w-0 overflow-hidden flex flex-col",children:e.jsxs("div",{className:"h-full flex flex-col bg-white rounded-lg shadow-sm border border-gray-200 m-4",children:[e.jsx("div",{className:"flex-shrink-0 bg-gray-50 border-b border-gray-200 rounded-t-lg px-4 lg:px-6 py-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Contacts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Browse and manage your contact database"}),y<=50&&e.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1.5 bg-red-50 border border-red-200 rounded-md",children:[e.jsx(ee,{size:16,className:"text-red-500"}),e.jsxs("span",{className:"text-sm text-red-700 font-medium",children:["Low Credits: ",y," remaining. Need more than 50 to reveal contacts."]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:()=>N(!p),className:"hidden lg:flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[e.jsx(U,{size:16}),e.jsx("span",{children:p?"Hide Filter":"Show Filter"}),Object.values(d).filter(t=>t!=="").length>0&&e.jsx("span",{className:"ml-1.5 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:Object.values(d).filter(t=>t!=="").length})]})})]})}),e.jsx("div",{className:"flex-1 min-h-0 relative bg-white rounded-b-lg overflow-hidden",children:e.jsx(fe,{data:O,columns:D,isLoading:f,sorting:z,onSortingChange:W,enableSorting:!0,enablePagination:!1,enableTableScroll:!0,tableHeight:"100%",scrollContainerRef:H,isLoadingMore:M,showScrollToTop:!0,emptyStateMessage:"No contacts found. Try adjusting your filters or search terms."})})]})})]})})]})};export{Ae as default};
