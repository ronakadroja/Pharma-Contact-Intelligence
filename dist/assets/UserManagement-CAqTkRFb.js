var xe=Object.defineProperty;var be=(t,s,a)=>s in t?xe(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var V=(t,s,a)=>be(t,typeof s!="symbol"?s+"":s,a);import{c as K,R as ee,j as e,s as ge,r as p,X as te,b as se,I as A,B as Q,e as G,t as ye,v as ve,d as je,w as we,C as J,x as Ne,y as _e}from"./index-D21QH4JS.js";import{a as Ce,c as Se,T as ke}from"./Table-zsgj2JuY.js";import{c as Ee}from"./combo-DQM6g1Mn.js";import{v as X,a as Y,b as Re,c as Ue,d as De,e as Fe,f as Te,g as Oe,h as Ae,P as Le}from"./validation-jaXKceP2.js";import{U as Pe}from"./user-Cl_qwyLh.js";import{M as $e}from"./mail-58VknhIU.js";import{P as Ie}from"./phone-jAwAhGea.js";import{P as Be}from"./plus-YAe2WIMc.js";import{D as Ve}from"./download-CnQq42cz.js";import{S as Me}from"./search-XKYGIuyy.js";import{f as ze}from"./format-CBpsKyOP.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],We=K("chevron-left",qe);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],Qe=K("chevrons-left",He);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],Ge=K("chevrons-right",Ke),Je=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),re=t=>Array.isArray(t)&&t.every(s=>typeof s=="object"&&!(s instanceof Array)),Xe=t=>Array.isArray(t)&&t.every(s=>Array.isArray(s)),Ye=t=>Array.from(t.map(s=>Object.keys(s)).reduce((s,a)=>new Set([...s,...a]),[])),Ze=(t,s)=>{s=s||Ye(t);let a=s,l=s;re(s)&&(a=s.map(d=>d.label),l=s.map(d=>d.key));const x=t.map(d=>l.map(h=>et(h,d)));return[a,...x]},et=(t,s)=>{const a=t.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(l,x,d,h){const n=l[x];if(n==null)h.splice(1);else return n},s);return a===void 0?t in s?s[t]:"":a},tt=t=>typeof t>"u"||t===null?"":t,ne=(t,s=",",a='"')=>t.filter(l=>l).map(l=>l.map(x=>tt(x)).map(x=>`${a}${x}${a}`).join(s)).join(`
`),st=(t,s,a,l)=>ne(s?[s,...t]:t,a,l),rt=(t,s,a,l)=>ne(Ze(t,s),a,l),nt=(t,s,a,l)=>s?`${s.join(a)}
${t}`:t.replace(/"/g,'""'),ae=(t,s,a,l)=>{if(re(t))return rt(t,s,a,l);if(Xe(t))return st(t,s,a,l);if(typeof t=="string")return nt(t,s,a);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},oe=(t,s,a,l,x)=>{const d=ae(t,a,l,x),h=Je()?"application/csv":"text/csv",n=new Blob([s?"\uFEFF":"",d],{type:h}),g=`data:${h};charset=utf-8,${s?"\uFEFF":""}${d}`,u=window.URL||window.webkitURL;return typeof u.createObjectURL>"u"?g:u.createObjectURL(n)};var ie={exports:{}},at="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ot=at,it=ot;function le(){}function ce(){}ce.resetWarningCache=le;var lt=function(){function t(l,x,d,h,n,g){if(g!==it){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function s(){return t}var a={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:ce,resetWarningCache:le};return a.PropTypes=a,a};ie.exports=lt();var E=ie.exports;const de={data:E.oneOfType([E.string,E.array,E.func]).isRequired,headers:E.array,target:E.string,separator:E.string,filename:E.string,uFEFF:E.bool,onClick:E.func,asyncOnClick:E.bool,enclosingCharacter:E.string},ue={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},ct={target:"_blank"};class Z extends ee.Component{constructor(s){super(s),this.state={}}buildURI(){return oe(...arguments)}componentDidMount(){const{data:s,headers:a,separator:l,enclosingCharacter:x,uFEFF:d,target:h,specs:n,replace:g}=this.props;this.state.page=window.open(this.buildURI(s,d,a,l,x),h,n,g)}getWindow(){return this.state.page}render(){return null}}V(Z,"defaultProps",Object.assign(ue,ct)),V(Z,"propTypes",de);var W;let dt=(W=class extends ee.Component{constructor(s){super(s),this.buildURI=this.buildURI.bind(this)}buildURI(){return oe(...arguments)}handleLegacy(s,a=!1){if(window.navigator.msSaveOrOpenBlob){s.preventDefault();const{data:l,headers:x,separator:d,filename:h,enclosingCharacter:n,uFEFF:g}=this.props,u=a&&typeof l=="function"?l():l;let j=new Blob([g?"\uFEFF":"",ae(u,x,d,n)]);return window.navigator.msSaveBlob(j,h),!1}}handleAsyncClick(s){const a=l=>{if(l===!1){s.preventDefault();return}this.handleLegacy(s,!0)};this.props.onClick(s,a)}handleSyncClick(s){if(this.props.onClick(s)===!1){s.preventDefault();return}this.handleLegacy(s)}handleClick(){return s=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(s):this.handleSyncClick(s);this.handleLegacy(s)}}render(){const{data:s,headers:a,separator:l,filename:x,uFEFF:d,children:h,onClick:n,asyncOnClick:g,enclosingCharacter:u,...j}=this.props,c=typeof window>"u"?"":this.buildURI(s,d,a,l,u);return e.jsx("a",{download:x,...j,ref:N=>this.link=N,target:"_self",href:c,onClick:this.handleClick(),children:h})}},V(W,"defaultProps",ue),V(W,"propTypes",de),W);const ut=dt,mt=({currentPage:t,totalPages:s,onPageChange:a,hasNextPage:l,hasPreviousPage:x,totalItems:d,pageSize:h,showTotalItems:n=!0})=>{const g=x??t>1,u=l??t<s,j=()=>{const c=[],N=[];let w;for(let y=1;y<=s;y++)(y===1||y===s||y>=t-2&&y<=t+2)&&c.push(y);for(let y of c)w&&(y-w===2?N.push(w+1):y-w!==1&&N.push("...")),N.push(y),w=y;return N};return e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4",children:[n&&d!==void 0&&h!==void 0&&e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:Math.min((t-1)*h+1,d)})," ","-"," ",e.jsx("span",{className:"font-medium",children:Math.min(t*h,d)})," ","of"," ",e.jsx("span",{className:"font-medium",children:d})," ","results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>a(1),disabled:!g,className:"relative inline-flex items-center px-2 py-2 rounded-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"First"}),e.jsx(Qe,{className:"h-4 w-4"})]}),e.jsxs("button",{onClick:()=>a(t-1),disabled:!g,className:"relative inline-flex items-center px-2 py-2 rounded-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx(We,{className:"h-4 w-4"})]}),e.jsx("div",{className:"hidden sm:flex gap-1",children:j().map((m,c)=>m==="..."?e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700",children:"..."},`dots-${c}`):e.jsx("button",{onClick:()=>a(m),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium rounded-md ${t===m?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:m},m))}),e.jsxs("button",{onClick:()=>a(t+1),disabled:!u,className:"relative inline-flex items-center px-2 py-2 rounded-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx(ge,{className:"h-4 w-4"})]}),e.jsxs("button",{onClick:()=>a(s),disabled:!u,className:"relative inline-flex items-center px-2 py-2 rounded-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Last"}),e.jsx(Ge,{className:"h-4 w-4"})]})]})]})},pt=({options:t,value:s,onChange:a,placeholder:l="Select an option",emptyMessage:x="No options found",disabled:d=!1,loading:h=!1,onClear:n,label:g,id:u,className:j=""})=>{const[m,c]=p.useState(!1),[N,w]=p.useState(""),[y,_]=p.useState(-1),D=p.useRef(null),k=p.useRef(null),v=t.filter(r=>r.name.toLowerCase().includes(N.toLowerCase())),P=t.find(r=>r.id===s),C=P?P.name:"";p.useEffect(()=>{const r=o=>{D.current&&!D.current.contains(o.target)&&(c(!1),w(""),_(-1))};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]);const R=r=>{if(!(d||h))switch(r.key){case"ArrowDown":r.preventDefault(),m?_(o=>o<v.length-1?o+1:0):c(!0);break;case"ArrowUp":r.preventDefault(),m&&_(o=>o>0?o-1:v.length-1);break;case"Enter":r.preventDefault(),m&&y>=0&&v[y]?$(v[y]):m||c(!0);break;case"Escape":r.preventDefault(),c(!1),w(""),_(-1);break}},$=r=>{a(r.id),c(!1),w(""),_(-1)},F=r=>{r.stopPropagation(),a(""),n&&n(),w("")},f=()=>{d||h||(c(!m),m||setTimeout(()=>{var r;return(r=k.current)==null?void 0:r.focus()},0))};return e.jsxs("div",{className:`relative ${j}`,ref:D,children:[g&&e.jsx("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700 mb-2",children:g}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-full border border-gray-300 rounded-md px-3 py-2 pr-10 h-10 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-blue-500 transition-all bg-white cursor-pointer ${d||h?"bg-gray-50 cursor-not-allowed":""}`,onClick:f,children:m?e.jsx("input",{ref:k,type:"text",value:N,onChange:r=>w(r.target.value),onKeyDown:R,placeholder:"Search...",className:"w-full outline-none bg-transparent text-sm placeholder:text-sm",disabled:d||h}):e.jsx("span",{className:`text-sm ${C?"text-gray-900":"text-gray-400"}`,children:h?"Loading...":C||l})}),e.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-1",children:[s&&!d&&!h&&e.jsx("button",{onClick:F,className:"text-gray-400 hover:text-gray-600 transition-colors p-1",title:"Clear selection",children:e.jsx(te,{size:14})}),e.jsx(Ce,{className:`text-gray-400 transition-transform ${m?"rotate-180":""}`,size:18})]}),m&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:h?e.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"Loading..."}):v.length>0?v.map((r,o)=>e.jsx("div",{className:`px-4 py-3 text-sm cursor-pointer transition-colors ${o===y?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"} ${s===r.id?"bg-blue-100 text-blue-800 font-medium":""}`,onClick:()=>$(r),onMouseEnter:()=>_(o),children:r.name},r.id)):e.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:x})})]})]})},ft=["User","Admin"],ht=["Active","Inactive"],M={name:"",email:"",password:"",phone_number:"",company:"",country:"",credits:"",role:"User",status:"Active",subscription_start_date:"",subscription_end_date:""},xt=({user:t,onSuccess:s,onCancel:a})=>{var F;const{success:l,error:x}=se(),[d,h]=p.useState(!1),[n,g]=p.useState(M),[u,j]=p.useState({}),[m,c]=p.useState({}),[N,w]=p.useState([]),[y,_]=p.useState(!1);p.useEffect(()=>{(async()=>{_(!0);try{const r=await Ee();w(r)}catch(r){console.error("Failed to load countries:",r),w([])}finally{_(!1)}})()},[]),p.useEffect(()=>{g(t?{name:t.name,email:t.email,password:"",phone_number:t.phone_number,company:t.company,country:t.country,credits:t.credits.toString(),role:t.role,status:t.status,subscription_start_date:t.subscription_start_date??"",subscription_end_date:t.subscription_end_date??""}:M),j({}),c({})},[t]);const D=(f,r)=>{switch(f){case"name":return Ae(r).error||"";case"email":return Oe(r).error||"";case"password":return Te(r,!t).error||"";case"phone_number":return Fe(r).error||"";case"company":return De(r).error||"";case"country":return Ue(r,"Country").error||"";case"credits":return Re(r).error||"";case"subscription_start_date":return Y(r,"Subscription start date").error||"";case"subscription_end_date":return Y(r,"Subscription end date").error||"";default:return""}},k=()=>{const f={};if(Object.keys(n).forEach(r=>{const o=D(r,n[r]);o&&(f[r]=o)}),n.subscription_start_date&&n.subscription_end_date){const r=X(n.subscription_start_date,n.subscription_end_date);r.isValid||(f.subscription_end_date=r.error||"")}return j(f),Object.keys(f).length===0},v=f=>{const{name:r,value:o}=f.target;if(g(S=>({...S,[r]:o})),c(S=>({...S,[r]:!0})),m[r]||o){const S=D(r,o);if(j(b=>({...b,[r]:S})),r==="subscription_start_date"||r==="subscription_end_date"){const b=r==="subscription_start_date"?o:n.subscription_start_date,z=r==="subscription_end_date"?o:n.subscription_end_date;if(b&&z){const q=X(b,z);q.isValid?j(I=>{const O={...I};return O.subscription_end_date==="Subscription start date must be before end date"&&delete O.subscription_end_date,O}):j(I=>({...I,subscription_end_date:q.error||""}))}}}},P=f=>{const r=N.find(b=>b.id===f),o=r?r.name:"";g(b=>({...b,country:o})),c(b=>({...b,country:!0}));const S=D("country",o);j(b=>({...b,country:S}))},C=f=>{const{name:r,value:o}=f.target;c(b=>({...b,[r]:!0}));const S=D(r,o);j(b=>({...b,[r]:S}))},R=()=>{g(M),j({}),c({}),a==null||a()},$=async f=>{f.preventDefault();const r=Object.keys(n);if(c(r.reduce((o,S)=>({...o,[S]:!0}),{})),!k()){x("Please fix the validation errors before submitting",{title:"Validation Error",persistent:!1});return}h(!0);try{if(t){const o={};n.name!==t.name&&(o.name=n.name),n.email!==t.email&&(o.email=n.email),n.phone_number!==t.phone_number&&(o.phone_number=n.phone_number),n.company!==t.company&&(o.company=n.company),n.country!==t.country&&(o.country=n.country),n.role!==t.role&&(o.role=n.role),n.credits!==t.credits.toString()&&(o.credits=n.credits),n.status!==t.status&&(o.status=n.status),n.subscription_start_date!==(t.subscription_start_date??"")&&(o.subscription_start_date=n.subscription_start_date),n.subscription_end_date!==(t.subscription_end_date??"")&&(o.subscription_end_date=n.subscription_end_date),n.password&&(o.password=G(n.password)),await ye(t.id,o),l("User updated successfully!",{title:"Success",actions:[{label:"View Users",onClick:()=>console.log("Navigate to users list"),variant:"primary"}]})}else{const o={...n,password:G(n.password)};await ve(o),l("User created successfully!",{title:"Success",actions:[{label:"Create Another",onClick:()=>{g(M),j({}),c({})},variant:"primary"}]}),g(M),j({}),c({})}s==null||s()}catch(o){const S=o?o.error:`Failed to ${t?"update":"create"} user`;x(S,{title:"Error",persistent:!1})}finally{h(!1)}};return e.jsxs("div",{className:"max-h-[85vh] flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between border-b border-neutral-200 pb-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:t?"Edit User":"Create New User"}),e.jsx("p",{className:"text-xs text-neutral-500",children:t?"Update user information":"Create a new user account"})]}),e.jsx("button",{type:"button",onClick:R,className:"p-1.5 text-neutral-400 hover:text-neutral-500 hover:bg-neutral-100 rounded-lg transition-colors",children:e.jsx(te,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-1 scrollbar-thin scrollbar-thumb-neutral-300 scrollbar-track-transparent",children:e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{className:"bg-neutral-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-900 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(A,{type:"text",id:"name",name:"name",label:"Full Name",value:n.name,onChange:v,onBlur:C,required:!0,placeholder:"Enter full name",leftIcon:e.jsx(Pe,{size:16}),error:m.name?u.name:void 0}),e.jsx(A,{type:"email",id:"email",name:"email",label:"Email",value:n.email,onChange:v,onBlur:C,required:!0,placeholder:"Enter email address",leftIcon:e.jsx($e,{size:16}),error:m.email?u.email:void 0}),e.jsx(A,{type:"password",id:"password",name:"password",label:`Password ${t?"":"*"}`,value:n.password,onChange:v,onBlur:C,required:!t,placeholder:t?"New password (optional)":"Enter password",hint:t?"Leave blank to keep current password":void 0,error:m.password?u.password:void 0}),e.jsx(A,{type:"tel",id:"phone_number",name:"phone_number",label:"Phone Number",value:n.phone_number,onChange:v,onBlur:C,required:!0,placeholder:"Enter phone number",leftIcon:e.jsx(Ie,{size:16}),error:m.phone_number?u.phone_number:void 0})]})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-900 mb-3",children:"Company Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(A,{type:"text",id:"company",name:"company",label:"Company Name",value:n.company,onChange:v,onBlur:C,required:!0,placeholder:"Enter company name",error:m.company?u.company:void 0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(pt,{label:"Country",id:"country",options:N,value:((F=N.find(f=>f.name===n.country))==null?void 0:F.id)||"",onChange:P,placeholder:"Select a country",emptyMessage:"No countries found. Try a different search term.",disabled:d,loading:y}),m.country&&u.country&&e.jsxs("p",{className:"text-sm text-error-600 flex items-center gap-1 mt-1",children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),u.country]})]})]})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-900 mb-3",children:"Account Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"role",className:"block text-sm font-medium text-neutral-700",children:["Role ",e.jsx("span",{className:"text-error-500 ml-1",children:"*"})]}),e.jsx("select",{id:"role",name:"role",value:n.role,onChange:v,onBlur:C,required:!0,className:`w-full text-sm px-4 py-3 border rounded-xl bg-white hover:border-neutral-400 focus:ring-2 focus:outline-none transition-all duration-200 ${m.role&&u.role?"border-error-500 focus:border-error-500 focus:ring-error-500":"border-neutral-300 focus:border-primary-500 focus:ring-primary-500"}`,children:ft.map(f=>e.jsx("option",{value:f,children:f},f))}),m.role&&u.role&&e.jsxs("p",{className:"text-sm text-error-600 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),u.role]})]}),e.jsx(A,{type:"number",id:"credits",name:"credits",label:"Credits",placeholder:"Enter credits",value:n.credits,onChange:v,onBlur:C,required:!0,min:"0",error:m.credits?u.credits:void 0}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"status",className:"block text-sm font-medium text-neutral-700",children:["Status ",e.jsx("span",{className:"text-error-500 ml-1",children:"*"})]}),e.jsx("select",{id:"status",name:"status",value:n.status,onChange:v,onBlur:C,required:!0,className:`w-full text-sm px-4 py-3 border rounded-xl bg-white hover:border-neutral-400 focus:ring-2 focus:outline-none transition-all duration-200 ${m.status&&u.status?"border-error-500 focus:border-error-500 focus:ring-error-500":"border-neutral-300 focus:border-primary-500 focus:ring-primary-500"}`,children:ht.map(f=>e.jsx("option",{value:f,children:f},f))}),m.status&&u.status&&e.jsxs("p",{className:"text-sm text-error-600 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),u.status]})]})]})]}),e.jsxs("div",{className:"bg-neutral-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-900 mb-3",children:"Subscription Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(A,{type:"date",id:"subscription_start_date",name:"subscription_start_date",label:"Subscription Start Date",value:n.subscription_start_date,onChange:v,onBlur:C,placeholder:"Select start date",error:m.subscription_start_date?u.subscription_start_date:void 0}),e.jsx(A,{type:"date",id:"subscription_end_date",name:"subscription_end_date",label:"Subscription End Date",value:n.subscription_end_date,onChange:v,onBlur:C,placeholder:"Select end date",error:m.subscription_end_date?u.subscription_end_date:void 0})]})]})]})}),e.jsxs("div",{className:"flex-shrink-0 flex items-center justify-end space-x-3 pt-4 border-t border-neutral-200 mt-4",children:[e.jsx(Q,{type:"button",variant:"outline",onClick:R,size:"sm",children:"Cancel"}),e.jsx(Q,{type:"submit",loading:d,disabled:d,size:"sm",onClick:f=>{f.preventDefault();const r=document.querySelector("form");if(r){const o=new Event("submit",{bubbles:!0,cancelable:!0});r.dispatchEvent(o)}},children:d?"Processing...":t?"Update User":"Create User"})]})]})},L=Se(),bt=10,Dt=()=>{const[t,s]=p.useState([]),[a,l]=p.useState(!0),[x,d]=p.useState(null),[h,n]=p.useState(!1),[g,u]=p.useState(null),[j,m]=p.useState([]),[c,N]=p.useState({}),[w,y]=p.useState(""),[_,D]=p.useState(""),[k,v]=p.useState(1),[P,C]=p.useState(1),[R,$]=p.useState(0),[F,f]=p.useState(bt),{success:r,error:o}=se();p.useEffect(()=>{const i=setTimeout(()=>{D(w)},500);return()=>clearTimeout(i)},[w]);const S=p.useMemo(()=>[L.accessor("name",{header:"Name",cell:i=>i.getValue()}),L.accessor("email",{header:"Email",cell:i=>i.getValue()}),L.accessor("company",{header:"Company",cell:i=>i.getValue()}),L.accessor("role",{header:"Role",cell:i=>e.jsx("span",{className:"capitalize",children:i.getValue()})}),L.accessor("credits",{header:"Credits",cell:i=>i.getValue()}),L.accessor("status",{header:"Status",cell:i=>e.jsx(je,{variant:i.getValue()==="Active"?"success":"error",size:"sm",children:i.getValue()})}),L.display({id:"actions",header:"Actions",cell:({row:i})=>e.jsx("div",{className:"flex justify-content-between align-center space-x-2 text-center",children:e.jsx("button",{onClick:()=>me(i.original),className:"text-blue-600 hover:text-blue-900 focus:outline-none",children:e.jsx(Le,{className:"h-5 w-5"})})})})],[]),b=p.useCallback(async(i=k,U=_)=>{l(!0),d(null);try{const B=(await we(i,F,U)).data,fe=B.data.map(he=>({...he}));s(fe),v(B.current_page),C(B.last_page),$(B.total),f(B.per_page)}catch(T){d(T instanceof Error?T.message:"Failed to fetch users")}finally{l(!1)}},[k,F,_]);p.useEffect(()=>{b(1)},[b]),p.useEffect(()=>{_!==w&&(v(1),b(1,_))},[_,b,w]);const z=i=>{v(i),b(i)},q=i=>{y(i)},I=async()=>{const i=Object.keys(c).filter(U=>c[U]);if(window.confirm(`Are you sure you want to delete ${i.length} users?`))try{await Promise.all(i.map(U=>_e(U))),r(`Successfully deleted ${i.length} users!`,{title:"Bulk Delete Complete"}),N({}),b(k)}catch(U){o(U instanceof Error?U.message:"Failed to delete users",{title:"Bulk Delete Failed",duration:6e3})}},O=async i=>{const U=Object.keys(c).filter(T=>c[T]);try{await Promise.all(U.map(T=>Ne(T,i==="Active"?"active":"inactive"))),r(`Successfully updated status for ${U.length} users!`,{title:"Status Updated"}),N({}),b(k)}catch(T){o(T instanceof Error?T.message:"Failed to update user status",{title:"Status Update Failed",duration:6e3})}},me=i=>{u(i),n(!0)},H=()=>{n(!1),u(null)},pe=()=>{H(),b(k)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(J,{variant:"elevated",padding:"lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Manage Users"}),e.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Add, edit, or remove user accounts and manage their permissions."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(Q,{onClick:()=>{u(null),n(!0)},icon:e.jsx(Be,{className:"h-4 w-4"}),children:"Add User"}),e.jsxs(ut,{data:t,filename:`users-${ze(new Date,"yyyy-MM-dd")}.csv`,className:"inline-flex items-center px-4 py-2 border border-neutral-300 shadow-sm text-sm font-medium rounded-xl text-neutral-700 bg-white hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]})}),e.jsxs(J,{variant:"elevated",padding:"none",className:"overflow-hidden",style:{height:"calc(100vh - 180px)"},children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Me,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:w,onChange:i=>q(i.target.value),placeholder:"Search users by name, email, or company...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-all duration-200"})]})}),e.jsx("div",{className:"text-sm text-gray-600",children:R>0?`${R.toLocaleString()} total users`:"No users found"})]})}),e.jsx("div",{className:"hidden sm:block",children:Object.keys(c).filter(i=>c[i]).length>0&&e.jsx("div",{className:"bg-blue-50 px-6 py-4 border-b border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[Object.keys(c).filter(i=>c[i]).length," users selected"]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>O("Active"),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-lg text-green-700 bg-green-100 hover:bg-green-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors",children:"Activate"}),e.jsx("button",{onClick:()=>O("Deactive"),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-lg text-yellow-700 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-colors",children:"Deactivate"}),e.jsx("button",{onClick:I,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-lg text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors",children:"Delete"})]})]})})}),e.jsx("div",{className:"sm:hidden",children:Object.keys(c).filter(i=>c[i]).length>0&&e.jsx("div",{className:"bg-blue-50 px-4 py-3 border-b border-blue-200",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[Object.keys(c).filter(i=>c[i]).length," users selected"]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>O("Active"),className:"w-full inline-flex justify-center items-center px-3 py-2 border border-transparent text-sm font-medium rounded-lg text-green-700 bg-green-100 hover:bg-green-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors",children:"Activate"}),e.jsx("button",{onClick:()=>O("Deactive"),className:"w-full inline-flex justify-center items-center px-3 py-2 border border-transparent text-sm font-medium rounded-lg text-yellow-700 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-colors",children:"Deactivate"}),e.jsx("button",{onClick:I,className:"w-full inline-flex justify-center items-center px-3 py-2 border border-transparent text-sm font-medium rounded-lg text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors",children:"Delete"})]})]})})}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(ke,{data:t,columns:S,isLoading:a,sorting:j,onSortingChange:m,enableSelection:!0,selectedRows:c,onSelectionChange:N,enableTableScroll:!0,tableHeight:"calc(100vh - 365px)",emptyStateMessage:x||"No users found"})}),!a&&!x&&R>0&&e.jsx("div",{className:"border-t border-gray-200 px-4 py-3 sm:px-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-700 w-full sm:w-auto text-center sm:text-left",children:["Showing ",(k-1)*F+1," to ",Math.min(k*F,R)," of ",R," users"]}),e.jsx(mt,{currentPage:k,totalPages:P,onPageChange:z,totalItems:R,pageSize:F})]})})]}),h&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm","aria-hidden":"true",onClick:H}),e.jsx("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:e.jsx("div",{className:"p-6",children:e.jsx(xt,{user:g,onSuccess:pe,onCancel:H})})})]})]})};export{Dt as default};
