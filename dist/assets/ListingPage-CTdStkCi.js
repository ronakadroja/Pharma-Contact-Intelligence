import{c as te,r,j as e,d as q,X as y,b as se,a as re,f as ne,g as J}from"./index-D21QH4JS.js";import{r as ae,L as Q,B as oe,g as ie}from"./contacts-b_MSMaFs.js";import{f as le,a as ce,b as de,c as xe,d as me}from"./combo-DQM6g1Mn.js";import{F as K,M as I,u as pe}from"./useInfiniteScroll-DRbeSKyl.js";import{C as ue,a as ge,T as he}from"./Table-zsgj2JuY.js";import{S as O}from"./search-XKYGIuyy.js";import{H as ye}from"./Header-CNNVNaFU.js";import{M as Z}from"./mail-58VknhIU.js";import{P as L}from"./phone-jAwAhGea.js";import{P as fe}from"./plus-YAe2WIMc.js";import"./user-Cl_qwyLh.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],je=te("check",be),Y={company_name:"",person_name:"",department:[],designation:"",product_type:[],person_country:[],company_country:[],region:[]},ee=({onFilter:M,isMobile:k,isLoading:s=!1,dropdownData:l})=>{const[w,g]=r.useState(Y),[b,z]=r.useState(""),[p,j]=r.useState(""),[_,E]=r.useState(""),[d,U]=r.useState(!0),[F,W]=r.useState(0),$=r.useRef(!0),[S,u]=r.useState([]),[R,f]=r.useState([]),[N,T]=r.useState([]),[A,v]=r.useState([]),[P,D]=r.useState([]),X=(l==null?void 0:l.departments)||[],G=(l==null?void 0:l.productTypes)||[],V=(l==null?void 0:l.countries)||[],H=(l==null?void 0:l.regions)||[],t=(l==null?void 0:l.isLoading)||!1;r.useEffect(()=>{$.current=!1},[]),r.useEffect(()=>{const o=Object.values(w).filter(n=>Array.isArray(n)?n.length>0:n!==""&&n!=="All").length;W(o)},[w]);const a=o=>{u(o);const n=o.map(c=>c.name);g(c=>({...c,person_country:n}))},i=o=>{f(o);const n=o.map(c=>c.name);g(c=>({...c,company_country:n}))},x=o=>{T(o);const n=o.map(c=>c.name);g(c=>({...c,department:n}))},h=o=>{v(o);const n=o.map(c=>c.name);g(c=>({...c,product_type:n}))},m=o=>{D(o);const n=o.map(c=>c.name);g(c=>({...c,region:n}))},B=()=>{g(Y),u([]),f([]),T([]),v([]),D([]),z(""),j(""),E(""),M(Y)},C=o=>{const n={...w};switch(o){case"company_name":E(""),n.company_name="";break;case"person_name":z(""),n.person_name="";break;case"department":T([]),n.department=[];break;case"designation":j(""),n.designation="";break;case"product_type":v([]),n.product_type=[];break;case"person_country":u([]),n.person_country=[];break;case"company_country":f([]),n.company_country=[];break;case"region":D([]),n.region=[];break}g(n)};return e.jsxs("div",{className:"h-full flex flex-col bg-white rounded-lg shadow-sm border border-gray-200",children:[k?e.jsx("div",{className:"flex-shrink-0 p-4 bg-gray-50 border-b border-gray-200 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{size:18,className:"text-gray-600"}),e.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Filters"}),F>0&&e.jsx(q,{variant:"primary",size:"sm",children:F})]}),e.jsx("button",{className:"text-gray-500 hover:text-gray-700 p-2 hover:bg-gray-200 rounded-full transition-colors",onClick:B,title:"Reset filters",children:e.jsx(y,{size:16})})]})}):e.jsx("div",{className:"flex-shrink-0 p-4 bg-gray-50 border-b border-gray-200 rounded-t-lg",children:e.jsxs("button",{className:"w-full flex items-center justify-between hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset rounded-md p-2 -m-2",onClick:()=>U(!d),"aria-expanded":d,"aria-controls":"filter-content",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{size:18,className:"text-gray-600"}),e.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Filters"}),F>0&&e.jsx(q,{variant:"primary",size:"sm",children:F})]}),e.jsx("div",{className:"flex items-center",children:d?e.jsx(ue,{size:18,className:"text-gray-500"}):e.jsx(ge,{size:18,className:"text-gray-500"})})]})}),d&&e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"company-name-input",className:"block text-sm font-medium text-gray-700",children:"Company Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"company-name-input",type:"text",value:_,onChange:o=>E(o.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 pl-9 pr-9 text-sm placeholder:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors h-10",placeholder:"Search by company name..."}),e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),_&&e.jsx("button",{onClick:()=>C("company_name"),disabled:s,className:`absolute right-3 top-1/2 transform -translate-y-1/2 transition-colors ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear company name",children:e.jsx(y,{size:14})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Country"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{options:V,selectedValues:R,onSelect:i,onRemove:i,displayValue:"name",placeholder:"Search and select company countries...",emptyRecordMsg:"No countries found. Try a different search term.",showCheckbox:!0,closeIcon:"cancel",showArrow:!0,style:{chips:{background:"#10B981",color:"white",fontSize:"12px",borderRadius:"4px",padding:"2px 6px",margin:"1px"},searchBox:{border:"1px solid #D1D5DB",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",minHeight:"40px",backgroundColor:"white"},inputField:{margin:"0px",fontSize:"14px",color:"#374151",backgroundColor:"transparent"},option:{color:"#374151",backgroundColor:"white",padding:"8px 10px",fontSize:"14px",borderBottom:"1px solid #F3F4F6",cursor:"pointer"},optionContainer:{border:"1px solid #D1D5DB",borderRadius:"6px",maxHeight:"200px",marginTop:"2px",backgroundColor:"white",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:1e3},multiselectContainer:{color:"#374151"},highlightOption:{backgroundColor:"#ECFDF5",color:"#047857"}},loading:t,disable:s||t}),R.length>0&&e.jsx("button",{onClick:()=>C("company_country"),disabled:s,className:`absolute right-3 top-3 transition-colors z-10 ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear company countries",children:e.jsx(y,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"person-name-input",className:"block text-sm font-medium text-gray-700",children:"Person Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"person-name-input",type:"text",value:b,onChange:o=>z(o.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 pl-9 pr-9 text-sm placeholder:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors h-10",placeholder:"Search by person name..."}),e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),b&&e.jsx("button",{onClick:()=>C("person_name"),disabled:s,className:`absolute right-3 top-1/2 transform -translate-y-1/2 transition-colors ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear person name",children:e.jsx(y,{size:14})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Person Country"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{options:V,selectedValues:S,onSelect:a,onRemove:a,displayValue:"name",placeholder:"Search and select person countries...",emptyRecordMsg:"No countries found. Try a different search term.",showCheckbox:!0,closeIcon:"cancel",showArrow:!0,style:{chips:{background:"#8B5CF6",color:"white",fontSize:"12px",borderRadius:"4px",padding:"2px 6px",margin:"1px"},searchBox:{border:"1px solid #D1D5DB",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",minHeight:"40px",backgroundColor:"white"},inputField:{margin:"0px",fontSize:"14px",color:"#374151",backgroundColor:"transparent"},option:{color:"#374151",backgroundColor:"white",padding:"8px 10px",fontSize:"14px",borderBottom:"1px solid #F3F4F6",cursor:"pointer"},optionContainer:{border:"1px solid #D1D5DB",borderRadius:"6px",maxHeight:"200px",marginTop:"2px",backgroundColor:"white",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:1e3},multiselectContainer:{color:"#374151"},highlightOption:{backgroundColor:"#F3E8FF",color:"#6B21A8"}},loading:t,disable:s||t}),S.length>0&&e.jsx("button",{onClick:()=>C("person_country"),disabled:s,className:`absolute right-3 top-3 transition-colors z-10 ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear person countries",children:e.jsx(y,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Region"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{options:H,selectedValues:P,onSelect:m,onRemove:m,displayValue:"name",placeholder:"Search and select regions...",emptyRecordMsg:"No regions found. Try a different search term.",showCheckbox:!0,closeIcon:"cancel",showArrow:!0,style:{chips:{background:"#F59E0B",color:"white",fontSize:"12px",borderRadius:"4px",padding:"2px 6px",margin:"1px"},searchBox:{border:"1px solid #D1D5DB",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",minHeight:"40px",backgroundColor:"white"},inputField:{margin:"0px",fontSize:"14px",color:"#374151",backgroundColor:"transparent"},option:{color:"#374151",backgroundColor:"white",padding:"8px 10px",fontSize:"14px",borderBottom:"1px solid #F3F4F6",cursor:"pointer"},optionContainer:{border:"1px solid #D1D5DB",borderRadius:"6px",maxHeight:"200px",marginTop:"2px",backgroundColor:"white",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:1e3},multiselectContainer:{color:"#374151"},highlightOption:{backgroundColor:"#FEF3C7",color:"#92400E"}},loading:t,disable:s||t}),P.length>0&&e.jsx("button",{onClick:()=>C("region"),disabled:s,className:`absolute right-3 top-3 transition-colors z-10 ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear regions",children:e.jsx(y,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"designation-input",className:"block text-sm font-medium text-gray-700",children:"Designation"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"designation-input",type:"text",value:p,onChange:o=>j(o.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 pl-9 pr-9 text-sm placeholder:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors h-10",placeholder:"Search by designation..."}),e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),p&&e.jsx("button",{onClick:()=>C("designation"),disabled:s,className:`absolute right-3 top-1/2 transform -translate-y-1/2 transition-colors ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear designation",children:e.jsx(y,{size:14})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Department"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{options:X,selectedValues:N,onSelect:x,onRemove:x,displayValue:"name",placeholder:"Search and select departments...",emptyRecordMsg:"No departments found. Try a different search term.",showCheckbox:!0,closeIcon:"cancel",showArrow:!0,style:{chips:{background:"#F59E0B",color:"white",fontSize:"12px",borderRadius:"4px",padding:"2px 6px",margin:"1px"},searchBox:{border:"1px solid #D1D5DB",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",minHeight:"40px",backgroundColor:"white"},inputField:{margin:"0px",fontSize:"14px",color:"#374151",backgroundColor:"transparent"},option:{color:"#374151",backgroundColor:"white",padding:"8px 10px",fontSize:"14px",borderBottom:"1px solid #F3F4F6",cursor:"pointer"},optionContainer:{border:"1px solid #D1D5DB",borderRadius:"6px",maxHeight:"200px",marginTop:"2px",backgroundColor:"white",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:1e3},multiselectContainer:{color:"#374151"},highlightOption:{backgroundColor:"#FEF3C7",color:"#92400E"}},loading:t,disable:s||t}),N.length>0&&e.jsx("button",{onClick:()=>C("department"),disabled:s,className:`absolute right-3 top-3 transition-colors z-10 ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear departments",children:e.jsx(y,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product Type"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{options:G,selectedValues:A,onSelect:h,onRemove:h,displayValue:"name",placeholder:"Search and select product types...",emptyRecordMsg:"No product types found. Try a different search term.",showCheckbox:!0,closeIcon:"cancel",showArrow:!0,style:{chips:{background:"#EF4444",color:"white",fontSize:"12px",borderRadius:"4px",padding:"2px 6px",margin:"1px"},searchBox:{border:"1px solid #D1D5DB",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",minHeight:"40px",backgroundColor:"white"},inputField:{margin:"0px",fontSize:"14px",color:"#374151",backgroundColor:"transparent"},option:{color:"#374151",backgroundColor:"white",padding:"8px 10px",fontSize:"14px",borderBottom:"1px solid #F3F4F6",cursor:"pointer"},optionContainer:{border:"1px solid #D1D5DB",borderRadius:"6px",maxHeight:"200px",marginTop:"2px",backgroundColor:"white",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:1e3},multiselectContainer:{color:"#374151"},highlightOption:{backgroundColor:"#FEE2E2",color:"#B91C1C"}},loading:t,disable:s||t}),A.length>0&&e.jsx("button",{onClick:()=>C("product_type"),disabled:s,className:`absolute right-3 top-3 transition-colors z-10 ${s?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"}`,title:s?"Loading...":"Clear product types",children:e.jsx(y,{size:16})})]})]})]})}),e.jsx("div",{className:"flex-shrink-0 p-4 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{const o={company_name:_,person_name:b,department:N.map(n=>n.name),designation:p,product_type:A.map(n=>n.name),person_country:S.map(n=>n.name),company_country:R.map(n=>n.name),region:P.map(n=>n.name)};g(o),M(o)},disabled:s,className:`flex-1 px-3 py-2 rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center justify-center gap-2 ${s?"bg-blue-400 text-white cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[e.jsx(O,{size:14}),"Search"]}),e.jsx("button",{onClick:B,disabled:s,className:`px-3 py-2 border rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 flex items-center justify-center gap-2 ${s?"border-gray-200 text-gray-400 cursor-not-allowed bg-gray-50":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-2 border-gray-400 border-t-transparent"}),"Clearing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{size:14}),"Clear All"]})})]})})]})]})},Ne=10,Be=()=>{const[M,k]=r.useState([]),[s,l]=r.useState(1),[w,g]=r.useState(!0),[b,z]=r.useState(!0),[p,j]=r.useState(!0),[_,E]=r.useState(0),[d,U]=r.useState({company_name:[],person_name:"",department:[],designation:"",product_type:[],person_country:[],company_country:[],region:[],city:""}),[F,W]=r.useState([]),[$,S]=r.useState({companies:[],departments:[],productTypes:[],countries:[],regions:[],isLoaded:!1,isLoading:!1}),{showToast:u}=se(),{setCoins:R,coins:f}=re(),N=r.useRef(!1),T=r.useCallback(async t=>{try{if(f<=50){u("Insufficient credits! You need more than 50 credits to reveal contact information. Please purchase more credits to continue.","error");return}const a=await ae(t.id);R(a.available_credit),u(`Added ${t.person_name} to your list`,"success"),k(i=>i.map(x=>x.id===t.id?{...x,...a.contact}:x))}catch(a){console.error("Error revealing contact:",a),u("Failed to reveal contact information","error")}},[f,u,R]),A=r.useMemo(()=>[{accessorKey:"company_name",header:"Company",size:200,cell:({row:t})=>e.jsxs("div",{className:"min-w-0 max-w-[200px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900 truncate",children:t.original.company_name}),t.original.company_linkedin_url&&e.jsx("a",{href:t.original.company_linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 transition-colors flex-shrink-0",title:"View Company LinkedIn",children:e.jsx(Q,{size:14})})]}),t.original.company_website&&e.jsx("div",{className:"text-xs text-blue-600 hover:text-blue-800 transition-colors truncate",children:t.original.company_website})]})},{accessorKey:"person_name",header:"Contact Person",size:180,cell:({row:t})=>e.jsxs("div",{className:"min-w-0 max-w-[180px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900 truncate",children:t.original.person_name}),t.original.person_linkedin_url&&e.jsx("a",{href:t.original.person_linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 transition-colors flex-shrink-0",title:"View LinkedIn Profile",children:e.jsx(Q,{size:14})})]}),e.jsx("div",{className:"text-xs text-gray-600 truncate",children:t.original.designation})]})},{accessorKey:"contact_info",header:"Contact Info",size:220,cell:({row:t})=>{const a=t.original.email&&t.original.email.trim()!=="",i=t.original.phone&&t.original.phone.trim()!=="";return!a&&!i?e.jsx("div",{className:"min-w-0 max-w-[220px]",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{size:12,className:"text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-mono text-gray-400 truncate",children:"****@*****.com"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{size:12,className:"text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-mono text-gray-400 truncate",children:"+1-***-***-****"})]})]})}):e.jsx("div",{className:"min-w-0 max-w-[220px]",children:e.jsxs("div",{className:"space-y-1",children:[a&&e.jsxs("a",{href:`mailto:${t.original.email}`,className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 hover:underline group",title:t.original.email,children:[e.jsx(Z,{size:12,className:"text-blue-500 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.original.email}),t.original.is_professional_email&&e.jsx("div",{title:"Professional Email",children:e.jsx(oe,{size:12,className:"text-green-700 flex-shrink-0"})})]}),i&&e.jsxs("a",{href:`tel:${t.original.phone}`,className:"flex items-center gap-1 text-xs text-green-600 hover:text-green-800 hover:underline group",title:t.original.phone,children:[e.jsx(L,{size:12,className:"text-green-500 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.original.phone})]})]})})}},{id:"actions",header:"Add",size:120,cell:({row:t})=>{if(t.original.email&&t.original.email.trim()!=="")return e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"inline-flex items-center gap-1 px-1 py-1 text-xs font-medium text-green-700 bg-green-50 rounded-md border border-green-200",title:"Already added to your list",children:[e.jsx(je,{size:12}),e.jsx("span",{children:"Added"})]})});{const i=f<=50;return e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:()=>T(t.original),disabled:i,className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-md transition-all duration-200 focus:outline-none focus:ring-1 focus:ring-offset-1 ${i?"text-gray-400 bg-gray-100 cursor-not-allowed opacity-60 border border-gray-200":"text-white bg-blue-600 border border-blue-200 hover:border-blue-600 focus:ring-blue-500"}`,title:i?"Insufficient credits (need more than 50)":"Add to your list",children:[e.jsx(fe,{size:12}),e.jsx("span",{children:i?"Credits":"Add"})]})})}}},{accessorKey:"is_verified",header:"Status",size:100,cell:({row:t})=>{const a=t.original.is_verified===1;return e.jsx("div",{className:"flex justify-center",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium transition-colors ${a?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:[a?e.jsx(ne,{size:10,className:"mr-1"}):e.jsx(J,{size:10,className:"mr-1"}),a?"Verified":"Unverified"]})})}},{accessorKey:"person_country",header:"Person Country",size:150,cell:({row:t})=>e.jsxs("div",{className:"min-w-0 max-w-[150px]",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate mb-1",title:t.original.person_country,children:t.original.person_country}),e.jsx("div",{className:"text-xs text-gray-600 truncate",title:t.original.city,children:t.original.city})]})},{accessorKey:"department",header:"Department",size:160,cell:({row:t})=>e.jsx("div",{className:"min-w-0 max-w-[160px]",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate mb-1",title:t.original.department,children:t.original.department})})},{accessorKey:"product_type",header:"Product Type",size:140,cell:({row:t})=>e.jsx("div",{className:"min-w-0 max-w-[140px]",children:e.jsx("div",{className:"text-sm text-gray-900 truncate",title:t.original.product_type,children:t.original.product_type})})},{accessorKey:"company_country",header:"Company Country",size:150,cell:({row:t})=>e.jsx("div",{className:"min-w-0 max-w-[150px]",children:e.jsx("div",{className:"text-sm text-gray-900 truncate",title:t.original.company_country,children:t.original.company_country})})},{accessorKey:"region",header:"Region",size:120,cell:({row:t})=>e.jsx("div",{className:"min-w-0 max-w-[120px]",children:e.jsx("div",{className:"text-sm text-gray-900 truncate",title:t.original.region,children:t.original.region})})}],[T,f]),v=r.useCallback(async(t=1,a=!1,i=!1)=>{try{a||z(!0);const x={company_name:d.company_name,person_name:d.person_name,department:d.department,designation:d.designation,product_type:d.product_type,person_country:d.person_country,company_country:d.company_country,region:d.region,city:d.city,page:t,per_page:Ne},h=await ie(x);a?k(m=>[...m,...h.data]):(k(h.data),l(1)),g(h.current_page<h.last_page),E(h.total),i&&u("Contact data loaded successfully","success")}catch(x){console.error("Error fetching contacts:",x),u("Failed to fetch contacts","error"),a||(k([]),g(!1))}finally{a||z(!1)}},[d,u]),P=r.useCallback(async()=>{if(!N.current){N.current=!0,S(t=>({...t,isLoading:!0}));try{const[t,a,i,x,h]=await Promise.all([le(),ce(),de(),xe(),me()]);S({companies:t,departments:a,productTypes:i,countries:x,regions:h,isLoaded:!0,isLoading:!1})}catch(t){console.error("Failed to load dropdown data:",t),S(a=>({...a,isLoading:!1,companies:a.companies,departments:a.departments,productTypes:a.productTypes,countries:a.countries,regions:a.regions})),N.current=!1}}},[]),D=r.useCallback(async()=>{const t=s+1;l(t),await v(t,!0)},[s,v]),{isLoadingMore:X,containerRef:G,tableScrollRef:V}=pe(D,{threshold:500,enabled:!b&&w,isLoading:b,hasMore:w,useTableScroll:!0});r.useEffect(()=>{v(1,!1)},[]),r.useEffect(()=>{l(1),k([]),g(!0),v(1,!1)},[d]),r.useEffect(()=>{const t=localStorage.getItem("contactsFilterVisibility");t!==null&&j(t==="true")},[]),r.useEffect(()=>{localStorage.setItem("contactsFilterVisibility",p.toString())},[p]),r.useEffect(()=>{p&&!N.current&&P()},[p,P]);const H=r.useCallback(t=>{const a={...d},i={company_name:t.company_name,person_name:t.person_name,department:t.department,designation:t.designation,product_type:t.product_type,person_country:t.person_country,company_country:t.company_country,region:t.region,city:t.city},x=Object.values(i).every(m=>Array.isArray(m)?m.length===0:m===""),h=Object.values(a).some(m=>Array.isArray(m)?m.length>0:m!=="");if(U(i),!(x&&h)){if(!x){const m=Object.values(i).filter(B=>Array.isArray(B)?B.length>0:B!=="").length;u(`Applied ${m} filter${m!==1?"s":""}`,"success")}}},[d,u]);return e.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col overflow-hidden",ref:G,children:[e.jsx(ye,{}),e.jsx("div",{className:"lg:hidden flex-shrink-0 bg-white border-b border-gray-200 shadow-sm",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("button",{onClick:()=>j(!p),className:"flex items-center justify-center w-full gap-2 px-4 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[e.jsx(K,{size:16}),e.jsx("span",{children:p?"Hide Filters":"Show Filters"})]})})}),e.jsx("div",{className:`lg:hidden flex-shrink-0 transition-all duration-300 ${p?"max-h-[400px] opacity-100":"max-h-0 opacity-0"} overflow-hidden`,children:e.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Filters"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-md",children:e.jsx(y,{size:24})})]}),e.jsx(ee,{onFilter:H,isMobile:!0,isLoading:b,dropdownData:$})]})}),e.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:e.jsxs("div",{className:"h-full flex flex-col lg:flex-row",children:[p&&e.jsx("div",{className:"hidden lg:flex flex-col flex-shrink-0 transition-all duration-300 overflow-hidden",style:{width:"20%",minWidth:"250px",maxWidth:"300px"},children:e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx(ee,{onFilter:H,isMobile:!1,isLoading:b,dropdownData:$})})}),e.jsx("div",{className:"flex-1 min-w-0 overflow-hidden flex flex-col",children:e.jsxs("div",{className:"h-full flex flex-col bg-white rounded-lg shadow-sm border border-gray-200 m-4",children:[e.jsx("div",{className:"flex-shrink-0 bg-gray-50 border-b border-gray-200 rounded-t-lg px-4 lg:px-6 py-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Contacts"}),_>0&&e.jsxs("div",{className:"inline-flex items-center px-2.5 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full border border-blue-200",children:[_.toLocaleString()," ",_===1?"contact":"contacts"]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Browse and manage your contact database"}),f<=50&&e.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1.5 bg-red-50 border border-red-200 rounded-md",children:[e.jsx(J,{size:16,className:"text-red-500"}),e.jsxs("span",{className:"text-sm text-red-700 font-medium",children:["Low Credits: ",f," remaining. Need more than 50 to reveal contacts."]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:()=>j(!p),className:"hidden lg:flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[e.jsx(K,{size:16}),e.jsx("span",{children:p?"Hide Filter":"Show Filter"})]})})]})}),e.jsx("div",{className:"flex-1 min-h-0 relative bg-white rounded-b-lg overflow-hidden",children:e.jsx(he,{data:M,columns:A,isLoading:b,sorting:F,onSortingChange:W,enableSorting:!0,enablePagination:!1,enableTableScroll:!0,tableHeight:"100%",scrollContainerRef:V,isLoadingMore:X,showScrollToTop:!0,emptyStateMessage:"No contacts found. Try adjusting your filters or search terms."})})]})})]})})]})};export{Be as default};
